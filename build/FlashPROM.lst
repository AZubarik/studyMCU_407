ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"FlashPROM.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.erase_flash.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 45522025 		.ascii	"ER %lu\012\000"
  20      6C750A00 
  21              		.section	.text.erase_flash,"ax",%progbits
  22              		.align	1
  23              		.global	erase_flash
  24              		.arch armv7e-m
  25              		.syntax unified
  26              		.thumb
  27              		.thumb_func
  28              		.fpu fpv4-sp-d16
  30              	erase_flash:
  31              	.LFB133:
  32              		.file 1 "Drivers/Flash/FlashPROM.c"
   1:Drivers/Flash/FlashPROM.c **** /*
   2:Drivers/Flash/FlashPROM.c ****  * FlashPROM.c
   3:Drivers/Flash/FlashPROM.c ****  *
   4:Drivers/Flash/FlashPROM.c ****  *  Created on: 30 –¥–µ–∫. 2019 –≥.
   5:Drivers/Flash/FlashPROM.c ****  *      Author: dima
   6:Drivers/Flash/FlashPROM.c ****  */
   7:Drivers/Flash/FlashPROM.c **** 
   8:Drivers/Flash/FlashPROM.c **** #include "FlashPROM.h"
   9:Drivers/Flash/FlashPROM.c **** 
  10:Drivers/Flash/FlashPROM.c **** extern CRC_HandleTypeDef hcrc;
  11:Drivers/Flash/FlashPROM.c **** extern UART_HandleTypeDef huart1;
  12:Drivers/Flash/FlashPROM.c **** extern uint32_t res_addr;
  13:Drivers/Flash/FlashPROM.c **** 
  14:Drivers/Flash/FlashPROM.c **** 
  15:Drivers/Flash/FlashPROM.c **** //////////////////////// –û–ß–ò–°–¢–ö–ê –ü–ê–ú–Ø–¢–ò /////////////////////////////
  16:Drivers/Flash/FlashPROM.c **** void erase_flash(void)
  17:Drivers/Flash/FlashPROM.c **** {
  33              		.loc 1 17 1 view -0
  34              		.cfi_startproc
  35              		@ args = 0, pretend = 0, frame = 72
  36              		@ frame_needed = 0, uses_anonymous_args = 0
  37 0000 10B5     		push	{r4, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 8
  40              		.cfi_offset 4, -8
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 2


  41              		.cfi_offset 14, -4
  42 0002 92B0     		sub	sp, sp, #72
  43              	.LCFI1:
  44              		.cfi_def_cfa_offset 80
  18:Drivers/Flash/FlashPROM.c **** 	static FLASH_EraseInitTypeDef EraseInitStruct;     // —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Ñ–
  45              		.loc 1 18 2 view .LVU1
  19:Drivers/Flash/FlashPROM.c **** 
  20:Drivers/Flash/FlashPROM.c **** 	//  EraseInitStruct.TypeErase = FLASH_TYPEERASE_PAGES; // –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞,
  21:Drivers/Flash/FlashPROM.c **** 	//  EraseInitStruct.PageAddress = STARTADDR;
  22:Drivers/Flash/FlashPROM.c **** 	//  EraseInitStruct.NbPages = PAGES;
  23:Drivers/Flash/FlashPROM.c **** 	//EraseInitStruct.Banks = FLASH_BANK_1; // FLASH_BANK_2 - –±–∞–Ω–∫ ‚Ññ2, FLASH_BANK_BOTH - –æ–±–∞ 
  24:Drivers/Flash/FlashPROM.c **** 	uint32_t page_error = 0; // –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –≤ –∫–æ—Ç–æ—Ä—É—é –∑–∞–ø–∏—à–µ—Ç—Å—è –∞–¥—Ä–µ—Å 
  46              		.loc 1 24 2 view .LVU2
  47              		.loc 1 24 11 is_stmt 0 view .LVU3
  48 0004 0023     		movs	r3, #0
  49 0006 1193     		str	r3, [sp, #68]
  25:Drivers/Flash/FlashPROM.c **** 
  26:Drivers/Flash/FlashPROM.c **** 	HAL_FLASH_Unlock(); // —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ñ–ª–µ—à
  50              		.loc 1 26 2 is_stmt 1 view .LVU4
  51 0008 FFF7FEFF 		bl	HAL_FLASH_Unlock
  52              	.LVL0:
  27:Drivers/Flash/FlashPROM.c **** 
  28:Drivers/Flash/FlashPROM.c **** 	if(HAL_FLASHEx_Erase(&EraseInitStruct, &page_error) != HAL_OK)
  53              		.loc 1 28 2 view .LVU5
  54              		.loc 1 28 5 is_stmt 0 view .LVU6
  55 000c 11A9     		add	r1, sp, #68
  56 000e 1048     		ldr	r0, .L5
  57 0010 FFF7FEFF 		bl	HAL_FLASHEx_Erase
  58              	.LVL1:
  59              		.loc 1 28 4 view .LVU7
  60 0014 18B9     		cbnz	r0, .L4
  61              	.L2:
  29:Drivers/Flash/FlashPROM.c **** 	{
  30:Drivers/Flash/FlashPROM.c **** 		uint32_t er = HAL_FLASH_GetError();
  31:Drivers/Flash/FlashPROM.c **** 		char str[64] = {0,};
  32:Drivers/Flash/FlashPROM.c **** 		snprintf(str, 64, "ER %lu\n", er);
  33:Drivers/Flash/FlashPROM.c **** 		HAL_UART_Transmit(&huart1, (uint8_t*)str, strlen(str), 100);
  34:Drivers/Flash/FlashPROM.c **** 	}
  35:Drivers/Flash/FlashPROM.c **** 	else
  36:Drivers/Flash/FlashPROM.c **** 	{
  37:Drivers/Flash/FlashPROM.c **** 		#if DEBUG
  38:Drivers/Flash/FlashPROM.c **** 		HAL_UART_Transmit(&huart1, (uint8_t*)"Erase OK\n", 9, 100);
  39:Drivers/Flash/FlashPROM.c **** 		#endif
  40:Drivers/Flash/FlashPROM.c **** 	}
  62              		.loc 1 40 2 is_stmt 1 view .LVU8
  41:Drivers/Flash/FlashPROM.c **** 
  42:Drivers/Flash/FlashPROM.c **** 	HAL_FLASH_Lock();
  63              		.loc 1 42 2 view .LVU9
  64 0016 FFF7FEFF 		bl	HAL_FLASH_Lock
  65              	.LVL2:
  43:Drivers/Flash/FlashPROM.c **** }
  66              		.loc 1 43 1 is_stmt 0 view .LVU10
  67 001a 12B0     		add	sp, sp, #72
  68              	.LCFI2:
  69              		.cfi_remember_state
  70              		.cfi_def_cfa_offset 8
  71              		@ sp needed
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 3


  72 001c 10BD     		pop	{r4, pc}
  73              	.L4:
  74              	.LCFI3:
  75              		.cfi_restore_state
  76              	.LBB2:
  30:Drivers/Flash/FlashPROM.c **** 		char str[64] = {0,};
  77              		.loc 1 30 3 is_stmt 1 view .LVU11
  30:Drivers/Flash/FlashPROM.c **** 		char str[64] = {0,};
  78              		.loc 1 30 17 is_stmt 0 view .LVU12
  79 001e FFF7FEFF 		bl	HAL_FLASH_GetError
  80              	.LVL3:
  81 0022 0446     		mov	r4, r0
  82              	.LVL4:
  31:Drivers/Flash/FlashPROM.c **** 		snprintf(str, 64, "ER %lu\n", er);
  83              		.loc 1 31 3 is_stmt 1 view .LVU13
  31:Drivers/Flash/FlashPROM.c **** 		snprintf(str, 64, "ER %lu\n", er);
  84              		.loc 1 31 8 is_stmt 0 view .LVU14
  85 0024 0021     		movs	r1, #0
  86 0026 0191     		str	r1, [sp, #4]
  87 0028 3C22     		movs	r2, #60
  88 002a 02A8     		add	r0, sp, #8
  89              	.LVL5:
  31:Drivers/Flash/FlashPROM.c **** 		snprintf(str, 64, "ER %lu\n", er);
  90              		.loc 1 31 8 view .LVU15
  91 002c FFF7FEFF 		bl	memset
  92              	.LVL6:
  32:Drivers/Flash/FlashPROM.c **** 		HAL_UART_Transmit(&huart1, (uint8_t*)str, strlen(str), 100);
  93              		.loc 1 32 3 is_stmt 1 view .LVU16
  94 0030 2346     		mov	r3, r4
  95 0032 084A     		ldr	r2, .L5+4
  96 0034 4021     		movs	r1, #64
  97 0036 01A8     		add	r0, sp, #4
  98 0038 FFF7FEFF 		bl	snprintf
  99              	.LVL7:
  33:Drivers/Flash/FlashPROM.c **** 	}
 100              		.loc 1 33 3 view .LVU17
  33:Drivers/Flash/FlashPROM.c **** 	}
 101              		.loc 1 33 45 is_stmt 0 view .LVU18
 102 003c 01A8     		add	r0, sp, #4
 103 003e FFF7FEFF 		bl	strlen
 104              	.LVL8:
  33:Drivers/Flash/FlashPROM.c **** 	}
 105              		.loc 1 33 3 view .LVU19
 106 0042 6423     		movs	r3, #100
 107 0044 82B2     		uxth	r2, r0
 108 0046 01A9     		add	r1, sp, #4
 109 0048 0348     		ldr	r0, .L5+8
 110 004a FFF7FEFF 		bl	HAL_UART_Transmit
 111              	.LVL9:
 112              	.LBE2:
 113 004e E2E7     		b	.L2
 114              	.L6:
 115              		.align	2
 116              	.L5:
 117 0050 00000000 		.word	.LANCHOR0
 118 0054 00000000 		.word	.LC0
 119 0058 00000000 		.word	huart1
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 4


 120              		.cfi_endproc
 121              	.LFE133:
 123              		.section	.text.flash_search_adress,"ax",%progbits
 124              		.align	1
 125              		.global	flash_search_adress
 126              		.syntax unified
 127              		.thumb
 128              		.thumb_func
 129              		.fpu fpv4-sp-d16
 131              	flash_search_adress:
 132              	.LVL10:
 133              	.LFB134:
  44:Drivers/Flash/FlashPROM.c **** 
  45:Drivers/Flash/FlashPROM.c **** //////////////////////// –ü–û–ò–°–ö –°–í–û–ë–û–î–ù–´–• –Ø–ß–ï–ï–ö /////////////////////////////
  46:Drivers/Flash/FlashPROM.c **** uint32_t flash_search_adress(uint32_t address, uint16_t cnt)
  47:Drivers/Flash/FlashPROM.c **** {
 134              		.loc 1 47 1 is_stmt 1 view -0
 135              		.cfi_startproc
 136              		@ args = 0, pretend = 0, frame = 0
 137              		@ frame_needed = 0, uses_anonymous_args = 0
 138              		.loc 1 47 1 is_stmt 0 view .LVU21
 139 0000 08B5     		push	{r3, lr}
 140              	.LCFI4:
 141              		.cfi_def_cfa_offset 8
 142              		.cfi_offset 3, -8
 143              		.cfi_offset 14, -4
  48:Drivers/Flash/FlashPROM.c **** 	uint16_t count_byte = cnt;
 144              		.loc 1 48 2 is_stmt 1 view .LVU22
 145              	.LVL11:
  49:Drivers/Flash/FlashPROM.c **** 
  50:Drivers/Flash/FlashPROM.c **** 	while(count_byte)
 146              		.loc 1 50 2 view .LVU23
  48:Drivers/Flash/FlashPROM.c **** 	uint16_t count_byte = cnt;
 147              		.loc 1 48 11 is_stmt 0 view .LVU24
 148 0002 0B46     		mov	r3, r1
 149              		.loc 1 50 7 view .LVU25
 150 0004 04E0     		b	.L8
 151              	.LVL12:
 152              	.L17:
  51:Drivers/Flash/FlashPROM.c **** 	{
  52:Drivers/Flash/FlashPROM.c **** 		if(0xFF == *(uint8_t*)address++) count_byte--;
 153              		.loc 1 52 36 is_stmt 1 discriminator 1 view .LVU26
 154              		.loc 1 52 46 is_stmt 0 discriminator 1 view .LVU27
 155 0006 013B     		subs	r3, r3, #1
 156              	.LVL13:
 157              		.loc 1 52 46 discriminator 1 view .LVU28
 158 0008 9BB2     		uxth	r3, r3
 159              	.LVL14:
 160              	.L9:
  53:Drivers/Flash/FlashPROM.c **** 		else count_byte = cnt;
  54:Drivers/Flash/FlashPROM.c **** 
  55:Drivers/Flash/FlashPROM.c **** 		if(address == ENDMEMORY - 1) // –µ—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –∫–æ–Ω–µ—Ü —Ñ–ª–µ—à–∞
 161              		.loc 1 55 3 is_stmt 1 view .LVU29
 162              		.loc 1 55 5 is_stmt 0 view .LVU30
 163 000a 084A     		ldr	r2, .L18
 164 000c 9042     		cmp	r0, r2
 165 000e 06D0     		beq	.L15
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 5


 166              	.LVL15:
 167              	.L8:
  50:Drivers/Flash/FlashPROM.c **** 	{
 168              		.loc 1 50 7 is_stmt 1 view .LVU31
 169 0010 4BB1     		cbz	r3, .L16
  52:Drivers/Flash/FlashPROM.c **** 		else count_byte = cnt;
 170              		.loc 1 52 3 view .LVU32
 171              	.LVL16:
  52:Drivers/Flash/FlashPROM.c **** 		else count_byte = cnt;
 172              		.loc 1 52 14 is_stmt 0 view .LVU33
 173 0012 10F8012B 		ldrb	r2, [r0], #1	@ zero_extendqisi2
 174              	.LVL17:
  52:Drivers/Flash/FlashPROM.c **** 		else count_byte = cnt;
 175              		.loc 1 52 5 view .LVU34
 176 0016 FF2A     		cmp	r2, #255
 177 0018 F5D0     		beq	.L17
  53:Drivers/Flash/FlashPROM.c **** 		else count_byte = cnt;
 178              		.loc 1 53 19 view .LVU35
 179 001a 0B46     		mov	r3, r1
 180              	.LVL18:
  53:Drivers/Flash/FlashPROM.c **** 		else count_byte = cnt;
 181              		.loc 1 53 19 view .LVU36
 182 001c F5E7     		b	.L9
 183              	.LVL19:
 184              	.L15:
  56:Drivers/Flash/FlashPROM.c **** 		{
  57:Drivers/Flash/FlashPROM.c **** 			erase_flash();        // —Ç–æ–≥–¥–∞ –æ—á–∏—â–∞–µ–º –ø–∞–º—è—Ç—å
 185              		.loc 1 57 4 is_stmt 1 view .LVU37
 186 001e FFF7FEFF 		bl	erase_flash
 187              	.LVL20:
  58:Drivers/Flash/FlashPROM.c **** 			#if DEBUG
  59:Drivers/Flash/FlashPROM.c **** 			HAL_UART_Transmit(&huart1, (uint8_t*)"New cicle\n", 10, 100);
  60:Drivers/Flash/FlashPROM.c **** 			#endif
  61:Drivers/Flash/FlashPROM.c **** 			return STARTADDR;     // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–¥—Ä–µ—Å –¥–ª—è –∑–∞–ø–∏—Å–∏ —Å —Å–∞–º–æ–≥
 188              		.loc 1 61 4 view .LVU38
 189              		.loc 1 61 11 is_stmt 0 view .LVU39
 190 0022 0348     		ldr	r0, .L18+4
 191 0024 00E0     		b	.L7
 192              	.LVL21:
 193              	.L16:
  62:Drivers/Flash/FlashPROM.c **** 		}
  63:Drivers/Flash/FlashPROM.c **** 	}
  64:Drivers/Flash/FlashPROM.c **** 
  65:Drivers/Flash/FlashPROM.c **** 	return address -= cnt;
 194              		.loc 1 65 2 is_stmt 1 view .LVU40
 195              		.loc 1 65 17 is_stmt 0 view .LVU41
 196 0026 401A     		subs	r0, r0, r1
 197              	.LVL22:
 198              	.L7:
  66:Drivers/Flash/FlashPROM.c **** }
 199              		.loc 1 66 1 view .LVU42
 200 0028 08BD     		pop	{r3, pc}
 201              	.L19:
 202 002a 00BF     		.align	2
 203              	.L18:
 204 002c EF030808 		.word	134743023
 205 0030 E0FF0708 		.word	134741984
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 6


 206              		.cfi_endproc
 207              	.LFE134:
 209              		.section	.text.read_last_data_in_flash,"ax",%progbits
 210              		.align	1
 211              		.global	read_last_data_in_flash
 212              		.syntax unified
 213              		.thumb
 214              		.thumb_func
 215              		.fpu fpv4-sp-d16
 217              	read_last_data_in_flash:
 218              	.LVL23:
 219              	.LFB136:
  67:Drivers/Flash/FlashPROM.c **** 
  68:Drivers/Flash/FlashPROM.c **** //////////////////////// –ó–ê–ü–ò–°–¨ –î–ê–ù–ù–´–• /////////////////////////////
  69:Drivers/Flash/FlashPROM.c **** void write_to_flash(myBuf_t *buff)
  70:Drivers/Flash/FlashPROM.c **** {
  71:Drivers/Flash/FlashPROM.c **** 	res_addr = flash_search_adress(res_addr, BUFFSIZE * DATAWIDTH); // –∏—â–µ–º —Å–≤–æ–±–æ–¥–Ω—ã–µ —è—
  72:Drivers/Flash/FlashPROM.c **** 
  73:Drivers/Flash/FlashPROM.c **** 	//////////////////////// –ó–ê–ü–ò–°–¨ ////////////////////////////
  74:Drivers/Flash/FlashPROM.c **** 	HAL_FLASH_Unlock(); // —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ñ–ª–µ—à
  75:Drivers/Flash/FlashPROM.c **** 
  76:Drivers/Flash/FlashPROM.c **** 	for(uint16_t i = 0; i < BUFFSIZE; i++)
  77:Drivers/Flash/FlashPROM.c **** 	{
  78:Drivers/Flash/FlashPROM.c **** 		if(HAL_FLASH_Program(WIDTHWRITE, res_addr, buff[i]) != HAL_OK)
  79:Drivers/Flash/FlashPROM.c **** 		{
  80:Drivers/Flash/FlashPROM.c **** 			uint32_t er = HAL_FLASH_GetError();
  81:Drivers/Flash/FlashPROM.c **** 			char str[64] = {0,};
  82:Drivers/Flash/FlashPROM.c **** 			snprintf(str, 64, "ER %lu\n", er);
  83:Drivers/Flash/FlashPROM.c **** 			HAL_UART_Transmit(&huart1, (uint8_t*)str, strlen(str), 100);
  84:Drivers/Flash/FlashPROM.c **** 		}
  85:Drivers/Flash/FlashPROM.c **** 
  86:Drivers/Flash/FlashPROM.c **** 		res_addr = res_addr + DATAWIDTH;
  87:Drivers/Flash/FlashPROM.c **** 	}
  88:Drivers/Flash/FlashPROM.c **** 
  89:Drivers/Flash/FlashPROM.c **** 	HAL_FLASH_Lock(); // –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ñ–ª–µ—à
  90:Drivers/Flash/FlashPROM.c **** 
  91:Drivers/Flash/FlashPROM.c **** 	//////////////////////// –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ (—ç—Ç–æ –º–æ–∂–Ω–æ —É–¥–ø–ª–∏—Ç—å
  92:Drivers/Flash/FlashPROM.c **** 	uint32_t crcbuff[BUFFSIZE] = {0,};
  93:Drivers/Flash/FlashPROM.c **** 
  94:Drivers/Flash/FlashPROM.c **** 	for(uint16_t i = 0; i < BUFFSIZE; i++) crcbuff[i] = (uint32_t)buff[i]; // –≤ —Ñ—É–Ω–∫—Ü–∏—é CRC32 
  95:Drivers/Flash/FlashPROM.c **** 
  96:Drivers/Flash/FlashPROM.c **** 	uint32_t sum1 = HAL_CRC_Calculate(&hcrc, (uint32_t*)crcbuff, BUFFSIZE); // crc –±—É—Ñ–µ—Ä–∞ –∫–æ—Ç
  97:Drivers/Flash/FlashPROM.c **** 
  98:Drivers/Flash/FlashPROM.c **** 	buff[0] = 0;
  99:Drivers/Flash/FlashPROM.c **** 	read_last_data_in_flash(buff); // —á–∏—Ç–∞–µ–º —á—Ç–æ –∑–∞–ø–∏—Å–∞–ª–∏
 100:Drivers/Flash/FlashPROM.c **** 
 101:Drivers/Flash/FlashPROM.c **** 	for(uint16_t i = 0; i < BUFFSIZE; i++) crcbuff[i] = (uint32_t)buff[i];
 102:Drivers/Flash/FlashPROM.c **** 
 103:Drivers/Flash/FlashPROM.c **** 	uint32_t sum2 = HAL_CRC_Calculate(&hcrc, (uint32_t*)crcbuff, BUFFSIZE); // crc –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–
 104:Drivers/Flash/FlashPROM.c **** 
 105:Drivers/Flash/FlashPROM.c **** 	#if DEBUG
 106:Drivers/Flash/FlashPROM.c **** 	char str[64] = {0,};
 107:Drivers/Flash/FlashPROM.c **** 	snprintf(str, 64, "SUM %lu %lu\n", sum1, sum2);
 108:Drivers/Flash/FlashPROM.c **** 	HAL_UART_Transmit(&huart1, (uint8_t*)str, strlen(str), 100);
 109:Drivers/Flash/FlashPROM.c **** 	#endif
 110:Drivers/Flash/FlashPROM.c **** 
 111:Drivers/Flash/FlashPROM.c **** 	if(sum1 != sum2) // –µ—Å–ª–∏ —Å—É–º–º—ã –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –∏ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–≥–æ –Ω–µ —Ä
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 7


 112:Drivers/Flash/FlashPROM.c **** 	{
 113:Drivers/Flash/FlashPROM.c **** 		#if DEBUG
 114:Drivers/Flash/FlashPROM.c **** 		HAL_UART_Transmit(&huart1, (uint8_t*)"Write buff ERROR\n", 17, 100);
 115:Drivers/Flash/FlashPROM.c **** 		#endif
 116:Drivers/Flash/FlashPROM.c **** 		return;
 117:Drivers/Flash/FlashPROM.c **** 	}
 118:Drivers/Flash/FlashPROM.c **** 	//////////////////////// –∫–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ //////////////////////
 119:Drivers/Flash/FlashPROM.c **** 
 120:Drivers/Flash/FlashPROM.c **** 	#if DEBUG
 121:Drivers/Flash/FlashPROM.c **** 	HAL_UART_Transmit(&huart1, (uint8_t*)"Write buff OK\n", 14, 100);
 122:Drivers/Flash/FlashPROM.c **** 	#endif
 123:Drivers/Flash/FlashPROM.c **** }
 124:Drivers/Flash/FlashPROM.c **** 
 125:Drivers/Flash/FlashPROM.c **** //////////////////////// –ß–¢–ï–ù–ò–ï –ü–û–°–õ–ï–î–ù–ò–• –î–ê–ù–ù–´–• /////////////////////////////
 126:Drivers/Flash/FlashPROM.c **** void read_last_data_in_flash(myBuf_t *buff)
 127:Drivers/Flash/FlashPROM.c **** {
 220              		.loc 1 127 1 is_stmt 1 view -0
 221              		.cfi_startproc
 222              		@ args = 0, pretend = 0, frame = 0
 223              		@ frame_needed = 0, uses_anonymous_args = 0
 224              		@ link register save eliminated.
 128:Drivers/Flash/FlashPROM.c **** 	if(res_addr == STARTADDR)
 225              		.loc 1 128 2 view .LVU44
 226              		.loc 1 128 14 is_stmt 0 view .LVU45
 227 0000 084B     		ldr	r3, .L24
 228 0002 1A68     		ldr	r2, [r3]
 229              		.loc 1 128 4 view .LVU46
 230 0004 084B     		ldr	r3, .L24+4
 231 0006 9A42     		cmp	r2, r3
 232 0008 0AD0     		beq	.L20
 129:Drivers/Flash/FlashPROM.c **** 	{
 130:Drivers/Flash/FlashPROM.c **** 		#if DEBUG
 131:Drivers/Flash/FlashPROM.c **** 		HAL_UART_Transmit(&huart1, (uint8_t*)"Flash empty\n", 12, 100);
 132:Drivers/Flash/FlashPROM.c **** 		#endif
 133:Drivers/Flash/FlashPROM.c **** 		return;
 134:Drivers/Flash/FlashPROM.c **** 	}
 135:Drivers/Flash/FlashPROM.c **** 
 136:Drivers/Flash/FlashPROM.c **** 	uint32_t adr = res_addr - BUFFSIZE * DATAWIDTH; // —Å–¥–≤–∏–≥–∞–µ–º—Å—è –Ω–∞ –Ω–∞—á–∞–ª–æ –ø–æ—Å–ª
 233              		.loc 1 136 2 is_stmt 1 view .LVU47
 234              		.loc 1 136 11 is_stmt 0 view .LVU48
 235 000a 0A3A     		subs	r2, r2, #10
 236              	.LVL24:
 137:Drivers/Flash/FlashPROM.c **** 
 138:Drivers/Flash/FlashPROM.c **** 	for(uint16_t i = 0; i < BUFFSIZE; i++)
 237              		.loc 1 138 2 is_stmt 1 view .LVU49
 238              	.LBB3:
 239              		.loc 1 138 6 view .LVU50
 240              		.loc 1 138 15 is_stmt 0 view .LVU51
 241 000c 0023     		movs	r3, #0
 242              	.LVL25:
 243              	.L22:
 244              		.loc 1 138 22 is_stmt 1 discriminator 1 view .LVU52
 245              		.loc 1 138 2 is_stmt 0 discriminator 1 view .LVU53
 246 000e 042B     		cmp	r3, #4
 247 0010 06D8     		bhi	.L20
 139:Drivers/Flash/FlashPROM.c **** 	{
 140:Drivers/Flash/FlashPROM.c **** 		buff[i] = *(myBuf_t*)adr; // —á–∏—Ç–∞–µ–º
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 8


 248              		.loc 1 140 3 is_stmt 1 discriminator 3 view .LVU54
 249              		.loc 1 140 13 is_stmt 0 discriminator 3 view .LVU55
 250 0012 52F8021B 		ldr	r1, [r2], #2
 251              	.LVL26:
 252              		.loc 1 140 11 discriminator 3 view .LVU56
 253 0016 40F82310 		str	r1, [r0, r3, lsl #2]
 141:Drivers/Flash/FlashPROM.c **** 		adr = adr + DATAWIDTH;
 254              		.loc 1 141 3 is_stmt 1 discriminator 3 view .LVU57
 255              	.LVL27:
 138:Drivers/Flash/FlashPROM.c **** 	{
 256              		.loc 1 138 36 discriminator 3 view .LVU58
 138:Drivers/Flash/FlashPROM.c **** 	{
 257              		.loc 1 138 37 is_stmt 0 discriminator 3 view .LVU59
 258 001a 0133     		adds	r3, r3, #1
 259              	.LVL28:
 138:Drivers/Flash/FlashPROM.c **** 	{
 260              		.loc 1 138 37 discriminator 3 view .LVU60
 261 001c 9BB2     		uxth	r3, r3
 262              	.LVL29:
 138:Drivers/Flash/FlashPROM.c **** 	{
 263              		.loc 1 138 37 discriminator 3 view .LVU61
 264 001e F6E7     		b	.L22
 265              	.LVL30:
 266              	.L20:
 138:Drivers/Flash/FlashPROM.c **** 	{
 267              		.loc 1 138 37 discriminator 3 view .LVU62
 268              	.LBE3:
 142:Drivers/Flash/FlashPROM.c **** 	}
 143:Drivers/Flash/FlashPROM.c **** }
 269              		.loc 1 143 1 view .LVU63
 270 0020 7047     		bx	lr
 271              	.L25:
 272 0022 00BF     		.align	2
 273              	.L24:
 274 0024 00000000 		.word	res_addr
 275 0028 E0FF0708 		.word	134741984
 276              		.cfi_endproc
 277              	.LFE136:
 279              		.section	.text.write_to_flash,"ax",%progbits
 280              		.align	1
 281              		.global	write_to_flash
 282              		.syntax unified
 283              		.thumb
 284              		.thumb_func
 285              		.fpu fpv4-sp-d16
 287              	write_to_flash:
 288              	.LVL31:
 289              	.LFB135:
  70:Drivers/Flash/FlashPROM.c **** 	res_addr = flash_search_adress(res_addr, BUFFSIZE * DATAWIDTH); // –∏—â–µ–º —Å–≤–æ–±–æ–¥–Ω—ã–µ —è—
 290              		.loc 1 70 1 is_stmt 1 view -0
 291              		.cfi_startproc
 292              		@ args = 0, pretend = 0, frame = 88
 293              		@ frame_needed = 0, uses_anonymous_args = 0
  70:Drivers/Flash/FlashPROM.c **** 	res_addr = flash_search_adress(res_addr, BUFFSIZE * DATAWIDTH); // –∏—â–µ–º —Å–≤–æ–±–æ–¥–Ω—ã–µ —è—
 294              		.loc 1 70 1 is_stmt 0 view .LVU65
 295 0000 70B5     		push	{r4, r5, r6, lr}
 296              	.LCFI5:
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 9


 297              		.cfi_def_cfa_offset 16
 298              		.cfi_offset 4, -16
 299              		.cfi_offset 5, -12
 300              		.cfi_offset 6, -8
 301              		.cfi_offset 14, -4
 302 0002 96B0     		sub	sp, sp, #88
 303              	.LCFI6:
 304              		.cfi_def_cfa_offset 104
 305 0004 0546     		mov	r5, r0
  71:Drivers/Flash/FlashPROM.c **** 
 306              		.loc 1 71 2 is_stmt 1 view .LVU66
  71:Drivers/Flash/FlashPROM.c **** 
 307              		.loc 1 71 13 is_stmt 0 view .LVU67
 308 0006 334C     		ldr	r4, .L41
 309 0008 0A21     		movs	r1, #10
 310 000a 2068     		ldr	r0, [r4]
 311              	.LVL32:
  71:Drivers/Flash/FlashPROM.c **** 
 312              		.loc 1 71 13 view .LVU68
 313 000c FFF7FEFF 		bl	flash_search_adress
 314              	.LVL33:
  71:Drivers/Flash/FlashPROM.c **** 
 315              		.loc 1 71 11 view .LVU69
 316 0010 2060     		str	r0, [r4]
  74:Drivers/Flash/FlashPROM.c **** 
 317              		.loc 1 74 2 is_stmt 1 view .LVU70
 318 0012 FFF7FEFF 		bl	HAL_FLASH_Unlock
 319              	.LVL34:
  76:Drivers/Flash/FlashPROM.c **** 	{
 320              		.loc 1 76 2 view .LVU71
 321              	.LBB4:
  76:Drivers/Flash/FlashPROM.c **** 	{
 322              		.loc 1 76 6 view .LVU72
  76:Drivers/Flash/FlashPROM.c **** 	{
 323              		.loc 1 76 15 is_stmt 0 view .LVU73
 324 0016 0024     		movs	r4, #0
  76:Drivers/Flash/FlashPROM.c **** 	{
 325              		.loc 1 76 2 view .LVU74
 326 0018 1DE0     		b	.L27
 327              	.LVL35:
 328              	.L38:
 329              	.LBB5:
  80:Drivers/Flash/FlashPROM.c **** 			char str[64] = {0,};
 330              		.loc 1 80 4 is_stmt 1 view .LVU75
  80:Drivers/Flash/FlashPROM.c **** 			char str[64] = {0,};
 331              		.loc 1 80 18 is_stmt 0 view .LVU76
 332 001a FFF7FEFF 		bl	HAL_FLASH_GetError
 333              	.LVL36:
 334 001e 0646     		mov	r6, r0
 335              	.LVL37:
  81:Drivers/Flash/FlashPROM.c **** 			snprintf(str, 64, "ER %lu\n", er);
 336              		.loc 1 81 4 is_stmt 1 view .LVU77
  81:Drivers/Flash/FlashPROM.c **** 			snprintf(str, 64, "ER %lu\n", er);
 337              		.loc 1 81 9 is_stmt 0 view .LVU78
 338 0020 0021     		movs	r1, #0
 339 0022 0191     		str	r1, [sp, #4]
 340 0024 3C22     		movs	r2, #60
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 10


 341 0026 02A8     		add	r0, sp, #8
 342              	.LVL38:
  81:Drivers/Flash/FlashPROM.c **** 			snprintf(str, 64, "ER %lu\n", er);
 343              		.loc 1 81 9 view .LVU79
 344 0028 FFF7FEFF 		bl	memset
 345              	.LVL39:
  82:Drivers/Flash/FlashPROM.c **** 			HAL_UART_Transmit(&huart1, (uint8_t*)str, strlen(str), 100);
 346              		.loc 1 82 4 is_stmt 1 view .LVU80
 347 002c 3346     		mov	r3, r6
 348 002e 2A4A     		ldr	r2, .L41+4
 349 0030 4021     		movs	r1, #64
 350 0032 01A8     		add	r0, sp, #4
 351 0034 FFF7FEFF 		bl	snprintf
 352              	.LVL40:
  83:Drivers/Flash/FlashPROM.c **** 		}
 353              		.loc 1 83 4 view .LVU81
  83:Drivers/Flash/FlashPROM.c **** 		}
 354              		.loc 1 83 46 is_stmt 0 view .LVU82
 355 0038 01A8     		add	r0, sp, #4
 356 003a FFF7FEFF 		bl	strlen
 357              	.LVL41:
  83:Drivers/Flash/FlashPROM.c **** 		}
 358              		.loc 1 83 4 view .LVU83
 359 003e 6423     		movs	r3, #100
 360 0040 82B2     		uxth	r2, r0
 361 0042 01A9     		add	r1, sp, #4
 362 0044 2548     		ldr	r0, .L41+8
 363 0046 FFF7FEFF 		bl	HAL_UART_Transmit
 364              	.LVL42:
 365              	.L28:
  83:Drivers/Flash/FlashPROM.c **** 		}
 366              		.loc 1 83 4 view .LVU84
 367              	.LBE5:
  86:Drivers/Flash/FlashPROM.c **** 	}
 368              		.loc 1 86 3 is_stmt 1 discriminator 2 view .LVU85
  86:Drivers/Flash/FlashPROM.c **** 	}
 369              		.loc 1 86 23 is_stmt 0 discriminator 2 view .LVU86
 370 004a 224A     		ldr	r2, .L41
 371 004c 1368     		ldr	r3, [r2]
 372 004e 0233     		adds	r3, r3, #2
  86:Drivers/Flash/FlashPROM.c **** 	}
 373              		.loc 1 86 12 discriminator 2 view .LVU87
 374 0050 1360     		str	r3, [r2]
  76:Drivers/Flash/FlashPROM.c **** 	{
 375              		.loc 1 76 36 is_stmt 1 discriminator 2 view .LVU88
  76:Drivers/Flash/FlashPROM.c **** 	{
 376              		.loc 1 76 37 is_stmt 0 discriminator 2 view .LVU89
 377 0052 0134     		adds	r4, r4, #1
 378              	.LVL43:
  76:Drivers/Flash/FlashPROM.c **** 	{
 379              		.loc 1 76 37 discriminator 2 view .LVU90
 380 0054 A4B2     		uxth	r4, r4
 381              	.LVL44:
 382              	.L27:
  76:Drivers/Flash/FlashPROM.c **** 	{
 383              		.loc 1 76 22 is_stmt 1 discriminator 1 view .LVU91
  76:Drivers/Flash/FlashPROM.c **** 	{
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 11


 384              		.loc 1 76 2 is_stmt 0 discriminator 1 view .LVU92
 385 0056 042C     		cmp	r4, #4
 386 0058 0AD8     		bhi	.L37
  78:Drivers/Flash/FlashPROM.c **** 		{
 387              		.loc 1 78 3 is_stmt 1 view .LVU93
  78:Drivers/Flash/FlashPROM.c **** 		{
 388              		.loc 1 78 6 is_stmt 0 view .LVU94
 389 005a 55F82420 		ldr	r2, [r5, r4, lsl #2]
 390 005e 0023     		movs	r3, #0
 391 0060 1C49     		ldr	r1, .L41
 392 0062 0968     		ldr	r1, [r1]
 393 0064 0120     		movs	r0, #1
 394 0066 FFF7FEFF 		bl	HAL_FLASH_Program
 395              	.LVL45:
  78:Drivers/Flash/FlashPROM.c **** 		{
 396              		.loc 1 78 5 view .LVU95
 397 006a 0028     		cmp	r0, #0
 398 006c EDD0     		beq	.L28
 399 006e D4E7     		b	.L38
 400              	.L37:
  78:Drivers/Flash/FlashPROM.c **** 		{
 401              		.loc 1 78 5 view .LVU96
 402              	.LBE4:
  89:Drivers/Flash/FlashPROM.c **** 
 403              		.loc 1 89 2 is_stmt 1 view .LVU97
 404 0070 FFF7FEFF 		bl	HAL_FLASH_Lock
 405              	.LVL46:
  92:Drivers/Flash/FlashPROM.c **** 
 406              		.loc 1 92 2 view .LVU98
  92:Drivers/Flash/FlashPROM.c **** 
 407              		.loc 1 92 11 is_stmt 0 view .LVU99
 408 0074 0023     		movs	r3, #0
 409 0076 1193     		str	r3, [sp, #68]
 410 0078 1293     		str	r3, [sp, #72]
 411 007a 1393     		str	r3, [sp, #76]
 412 007c 1493     		str	r3, [sp, #80]
 413 007e 1593     		str	r3, [sp, #84]
  94:Drivers/Flash/FlashPROM.c **** 
 414              		.loc 1 94 2 is_stmt 1 view .LVU100
 415              	.LBB6:
  94:Drivers/Flash/FlashPROM.c **** 
 416              		.loc 1 94 6 view .LVU101
 417              	.LVL47:
 418              	.L30:
  94:Drivers/Flash/FlashPROM.c **** 
 419              		.loc 1 94 22 discriminator 1 view .LVU102
  94:Drivers/Flash/FlashPROM.c **** 
 420              		.loc 1 94 2 is_stmt 0 discriminator 1 view .LVU103
 421 0080 042B     		cmp	r3, #4
 422 0082 09D8     		bhi	.L39
  94:Drivers/Flash/FlashPROM.c **** 
 423              		.loc 1 94 41 is_stmt 1 discriminator 3 view .LVU104
  94:Drivers/Flash/FlashPROM.c **** 
 424              		.loc 1 94 54 is_stmt 0 discriminator 3 view .LVU105
 425 0084 55F82310 		ldr	r1, [r5, r3, lsl #2]
  94:Drivers/Flash/FlashPROM.c **** 
 426              		.loc 1 94 52 discriminator 3 view .LVU106
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 12


 427 0088 16AA     		add	r2, sp, #88
 428 008a 02EB8302 		add	r2, r2, r3, lsl #2
 429 008e 42F8141C 		str	r1, [r2, #-20]
  94:Drivers/Flash/FlashPROM.c **** 
 430              		.loc 1 94 36 is_stmt 1 discriminator 3 view .LVU107
  94:Drivers/Flash/FlashPROM.c **** 
 431              		.loc 1 94 37 is_stmt 0 discriminator 3 view .LVU108
 432 0092 0133     		adds	r3, r3, #1
 433              	.LVL48:
  94:Drivers/Flash/FlashPROM.c **** 
 434              		.loc 1 94 37 discriminator 3 view .LVU109
 435 0094 9BB2     		uxth	r3, r3
 436              	.LVL49:
  94:Drivers/Flash/FlashPROM.c **** 
 437              		.loc 1 94 37 discriminator 3 view .LVU110
 438 0096 F3E7     		b	.L30
 439              	.L39:
  94:Drivers/Flash/FlashPROM.c **** 
 440              		.loc 1 94 37 discriminator 3 view .LVU111
 441              	.LBE6:
  96:Drivers/Flash/FlashPROM.c **** 
 442              		.loc 1 96 2 is_stmt 1 view .LVU112
  96:Drivers/Flash/FlashPROM.c **** 
 443              		.loc 1 96 18 is_stmt 0 view .LVU113
 444 0098 0522     		movs	r2, #5
 445 009a 11A9     		add	r1, sp, #68
 446 009c 1048     		ldr	r0, .L41+12
 447 009e FFF7FEFF 		bl	HAL_CRC_Calculate
 448              	.LVL50:
  98:Drivers/Flash/FlashPROM.c **** 	read_last_data_in_flash(buff); // —á–∏—Ç–∞–µ–º —á—Ç–æ –∑–∞–ø–∏—Å–∞–ª–∏
 449              		.loc 1 98 2 is_stmt 1 view .LVU114
  98:Drivers/Flash/FlashPROM.c **** 	read_last_data_in_flash(buff); // —á–∏—Ç–∞–µ–º —á—Ç–æ –∑–∞–ø–∏—Å–∞–ª–∏
 450              		.loc 1 98 10 is_stmt 0 view .LVU115
 451 00a2 0024     		movs	r4, #0
 452              	.LVL51:
  98:Drivers/Flash/FlashPROM.c **** 	read_last_data_in_flash(buff); // —á–∏—Ç–∞–µ–º —á—Ç–æ –∑–∞–ø–∏—Å–∞–ª–∏
 453              		.loc 1 98 10 view .LVU116
 454 00a4 2C60     		str	r4, [r5]
  99:Drivers/Flash/FlashPROM.c **** 
 455              		.loc 1 99 2 is_stmt 1 view .LVU117
 456 00a6 2846     		mov	r0, r5
 457              	.LVL52:
  99:Drivers/Flash/FlashPROM.c **** 
 458              		.loc 1 99 2 is_stmt 0 view .LVU118
 459 00a8 FFF7FEFF 		bl	read_last_data_in_flash
 460              	.LVL53:
 101:Drivers/Flash/FlashPROM.c **** 
 461              		.loc 1 101 2 is_stmt 1 view .LVU119
 462              	.LBB7:
 101:Drivers/Flash/FlashPROM.c **** 
 463              		.loc 1 101 6 view .LVU120
 101:Drivers/Flash/FlashPROM.c **** 
 464              		.loc 1 101 15 is_stmt 0 view .LVU121
 465 00ac 2346     		mov	r3, r4
 466              	.LVL54:
 467              	.L32:
 101:Drivers/Flash/FlashPROM.c **** 
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 13


 468              		.loc 1 101 22 is_stmt 1 discriminator 1 view .LVU122
 101:Drivers/Flash/FlashPROM.c **** 
 469              		.loc 1 101 2 is_stmt 0 discriminator 1 view .LVU123
 470 00ae 042B     		cmp	r3, #4
 471 00b0 09D8     		bhi	.L40
 101:Drivers/Flash/FlashPROM.c **** 
 472              		.loc 1 101 41 is_stmt 1 discriminator 3 view .LVU124
 101:Drivers/Flash/FlashPROM.c **** 
 473              		.loc 1 101 54 is_stmt 0 discriminator 3 view .LVU125
 474 00b2 55F82310 		ldr	r1, [r5, r3, lsl #2]
 101:Drivers/Flash/FlashPROM.c **** 
 475              		.loc 1 101 52 discriminator 3 view .LVU126
 476 00b6 16AA     		add	r2, sp, #88
 477 00b8 02EB8302 		add	r2, r2, r3, lsl #2
 478 00bc 42F8141C 		str	r1, [r2, #-20]
 101:Drivers/Flash/FlashPROM.c **** 
 479              		.loc 1 101 36 is_stmt 1 discriminator 3 view .LVU127
 101:Drivers/Flash/FlashPROM.c **** 
 480              		.loc 1 101 37 is_stmt 0 discriminator 3 view .LVU128
 481 00c0 0133     		adds	r3, r3, #1
 482              	.LVL55:
 101:Drivers/Flash/FlashPROM.c **** 
 483              		.loc 1 101 37 discriminator 3 view .LVU129
 484 00c2 9BB2     		uxth	r3, r3
 485              	.LVL56:
 101:Drivers/Flash/FlashPROM.c **** 
 486              		.loc 1 101 37 discriminator 3 view .LVU130
 487 00c4 F3E7     		b	.L32
 488              	.L40:
 101:Drivers/Flash/FlashPROM.c **** 
 489              		.loc 1 101 37 discriminator 3 view .LVU131
 490              	.LBE7:
 103:Drivers/Flash/FlashPROM.c **** 
 491              		.loc 1 103 2 is_stmt 1 view .LVU132
 103:Drivers/Flash/FlashPROM.c **** 
 492              		.loc 1 103 18 is_stmt 0 view .LVU133
 493 00c6 0522     		movs	r2, #5
 494 00c8 11A9     		add	r1, sp, #68
 495 00ca 0548     		ldr	r0, .L41+12
 496 00cc FFF7FEFF 		bl	HAL_CRC_Calculate
 497              	.LVL57:
 111:Drivers/Flash/FlashPROM.c **** 	{
 498              		.loc 1 111 2 is_stmt 1 view .LVU134
 123:Drivers/Flash/FlashPROM.c **** 
 499              		.loc 1 123 1 is_stmt 0 view .LVU135
 500 00d0 16B0     		add	sp, sp, #88
 501              	.LCFI7:
 502              		.cfi_def_cfa_offset 16
 503              		@ sp needed
 504 00d2 70BD     		pop	{r4, r5, r6, pc}
 505              	.LVL58:
 506              	.L42:
 123:Drivers/Flash/FlashPROM.c **** 
 507              		.loc 1 123 1 view .LVU136
 508              		.align	2
 509              	.L41:
 510 00d4 00000000 		.word	res_addr
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 14


 511 00d8 00000000 		.word	.LC0
 512 00dc 00000000 		.word	huart1
 513 00e0 00000000 		.word	hcrc
 514              		.cfi_endproc
 515              	.LFE135:
 517              		.section	.bss.EraseInitStruct.9457,"aw",%nobits
 518              		.align	2
 519              		.set	.LANCHOR0,. + 0
 522              	EraseInitStruct.9457:
 523 0000 00000000 		.space	20
 523      00000000 
 523      00000000 
 523      00000000 
 523      00000000 
 524              		.text
 525              	.Letext0:
 526              		.file 2 "c:\\vscodeproject\\software\\arm_gcc\\arm-none-eabi\\include\\machine\\_default_types.h"
 527              		.file 3 "c:\\vscodeproject\\software\\arm_gcc\\arm-none-eabi\\include\\sys\\_stdint.h"
 528              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 529              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 530              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 531              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 532              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 533              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_crc.h"
 534              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_flash_ex.h"
 535              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 536              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 537              		.file 13 "c:\\vscodeproject\\software\\arm_gcc\\arm-none-eabi\\include\\sys\\lock.h"
 538              		.file 14 "c:\\vscodeproject\\software\\arm_gcc\\arm-none-eabi\\include\\sys\\_types.h"
 539              		.file 15 "c:\\vscodeproject\\software\\arm_gcc\\lib\\gcc\\arm-none-eabi\\9.2.1\\include\\stddef.h"
 540              		.file 16 "c:\\vscodeproject\\software\\arm_gcc\\arm-none-eabi\\include\\sys\\reent.h"
 541              		.file 17 "Drivers/Flash/FlashPROM.h"
 542              		.file 18 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_flash.h"
 543              		.file 19 "c:\\vscodeproject\\software\\arm_gcc\\arm-none-eabi\\include\\stdio.h"
 544              		.file 20 "c:\\vscodeproject\\software\\arm_gcc\\arm-none-eabi\\include\\string.h"
 545              		.file 21 "<built-in>"
ARM GAS  C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s 			page 15


DEFINED SYMBOLS
                            *ABS*:0000000000000000 FlashPROM.c
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:18     .rodata.erase_flash.str1.4:0000000000000000 $d
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:22     .text.erase_flash:0000000000000000 $t
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:30     .text.erase_flash:0000000000000000 erase_flash
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:117    .text.erase_flash:0000000000000050 $d
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:124    .text.flash_search_adress:0000000000000000 $t
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:131    .text.flash_search_adress:0000000000000000 flash_search_adress
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:204    .text.flash_search_adress:000000000000002c $d
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:210    .text.read_last_data_in_flash:0000000000000000 $t
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:217    .text.read_last_data_in_flash:0000000000000000 read_last_data_in_flash
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:274    .text.read_last_data_in_flash:0000000000000024 $d
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:280    .text.write_to_flash:0000000000000000 $t
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:287    .text.write_to_flash:0000000000000000 write_to_flash
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:510    .text.write_to_flash:00000000000000d4 $d
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:518    .bss.EraseInitStruct.9457:0000000000000000 $d
C:\Users\Andre\AppData\Local\Temp\cc1Q4SaZ.s:522    .bss.EraseInitStruct.9457:0000000000000000 EraseInitStruct.9457

UNDEFINED SYMBOLS
HAL_FLASH_Unlock
HAL_FLASHEx_Erase
HAL_FLASH_Lock
HAL_FLASH_GetError
memset
snprintf
strlen
HAL_UART_Transmit
huart1
res_addr
HAL_FLASH_Program
HAL_CRC_Calculate
hcrc
